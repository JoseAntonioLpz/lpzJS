/*
*
* AUTHOR: José Antonio López López
* GITHUB: https://github.com/JoseAntonioLpz
* REPOSITORY: https://github.com/JoseAntonioLpz/lpzJS
* LICENSE: MIT
* 
*/
function graphic(t){let e=t.getContext("2d"),l=t.height,a=t.width,i=JSON.parse(t.dataset.json),n=null!=t.dataset.title?t.dataset.title:"",o=null!=t.dataset.color?t.dataset.color:"blue",s=[];i.forEach(function(t){s.push(t.value)});let r=Math.max(...s);e.beginPath(),e.strokeStyle="black",e.moveTo(25,10),e.lineTo(25,l-15),e.lineTo(a,l-15),e.stroke(),e.beginPath(),e.font="10px Arial",e.fillText(r,0,20),e.beginPath(),e.font="10px Arial",e.fillText(r/2,0,(l-15)/2),e.beginPath(),e.font="10px Arial",e.fillText(0,0,l-15),e.beginPath(),e.fillText(n,30,20);let c=25,h=25,f=l-15-(i[0].value*(l-15)/r-15),d=null!=t.dataset.sep?t.dataset.sep:"55";i.forEach(function(t){let a=l-15-(t.value*(l-15)/r-15);e.beginPath(),e.fillStyle=o,e.arc(c,a,3,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.strokeStyle=o,e.moveTo(h,f),e.lineTo(c,a),e.stroke(),e.beginPath(),e.fillStyle="black",e.font="10px Arial",e.fillText(t.name,c,l),h=c,f=a,c+=parseInt(d)})}function circle(t){let e=t.getContext("2d"),l=JSON.parse(t.dataset.json),a=null!=t.dataset.title?t.dataset.title:"";var i=0;l.forEach(function(t){i+=parseInt(t.value)});let n=0,o=0,s=1;l.forEach(function(l){let a=100*l.value/i;o+=2*a/100*Math.PI,e.beginPath(),e.moveTo(t.width/2.5,t.height/2.5),e.fillStyle=l.color,e.arc(t.width/2.5,t.height/2.5,t.width/2.5,n,o,!1),e.fill(),e.save(),n=o,e.beginPath(),e.fillRect(t.width-65,12*s-9,10,10),e.fillStyle="black",e.font="10px Arial",e.fillText(l.name,t.width-50,0+12*s),e.restore(),s++}),e.beginPath(),e.fillStyle="black",e.font="10px Arial",e.fillText(a,0,t.height-20)}function graphicBar(t){let e=t.getContext("2d"),l=t.width,a=t.height,i=null!=t.dataset.title?t.dataset.title:"";e.fillStyle="black",e.font="10px Arial",e.fillText(i,10,10),e.beginPath(),e.moveTo(0,0),e.lineTo(0,a-15),e.lineTo(l,a-15),e.stroke();let n=JSON.parse(t.dataset.json),o=[];n.forEach(function(t){o.push(t.value)});let s=null!=t.dataset.sep?parseInt(t.dataset.sep):10,r=Math.max(...o),c=(l-s*(n.length+1))/n.length,h=null!=t.dataset.min?t.dataset.min:20,f=null!=t.dataset.max?t.dataset.max:30;h>c?c=parseInt(h):f<c&&(c=parseInt(f));let d=s,u=null!=t.dataset.color?t.dataset.color:"blue",g=null!=t.dataset.valcol?t.dataset.valcol:"white";n.forEach(function(t){let l=t.value*(a-15)/r;e.fillStyle=u,e.fillRect(d,a-15-l,c,l),e.fillStyle="black",e.font="10px Arial",e.fillText(t.name.substring(0,6),d,a-5),e.save(),e.fillStyle=g,e.font="10px Arial",e.textAlign="center",e.fillText(t.value,d+c/2,a-l),e.restore(),d=d+c+s})}!function(){var t=document.getElementsByTagName("canvas");for(let e of t)switch(e.className){case"graphic_bar_lpz":graphicBar(e);break;case"circle_lpz":circle(e);break;case"graphic_lpz":graphic(e)}}();