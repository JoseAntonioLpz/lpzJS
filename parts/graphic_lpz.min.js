/*
*
* AUTHOR: José Antonio López López
* GITHUB: https://github.com/JoseAntonioLpz
* REPOSITORY: https://github.com/JoseAntonioLpz/lpzJS
* LICENSE: MIT
* 
*/
function graphic(t){let e=t.getContext("2d"),l=t.height,a=t.width;e.clearRect(0,0,a,l);let i=JSON.parse(t.dataset.json),n=null!=t.dataset.title?t.dataset.title:"",o=null!=t.dataset.color?t.dataset.color:"blue",r=[];i.forEach(function(t){r.push(t.value)});let s=Math.max(...r);e.beginPath(),e.strokeStyle="black",e.moveTo(25,10),e.lineTo(25,l-15),e.lineTo(a,l-15),e.stroke(),e.beginPath(),e.font="10px Arial",e.fillText(s,0,20),e.beginPath(),e.font="10px Arial",e.fillText(s/2,0,(l-15)/2),e.beginPath(),e.font="10px Arial",e.fillText(0,0,l-15),e.beginPath(),e.fillText(n,30,20);let c=25,f=25,h=l-15-(i[0].value*(l-15)/s-15),u=null!=t.dataset.sep?t.dataset.sep:"55";i.forEach(function(t){let a=l-15-(t.value*(l-15)/s-15);e.beginPath(),e.fillStyle=o,e.arc(c,a,3,0,2*Math.PI,!0),e.fill(),e.beginPath(),e.strokeStyle=o,e.moveTo(f,h),e.lineTo(c,a),e.stroke(),e.beginPath(),e.fillStyle="black",e.font="10px Arial",e.fillText(t.name,c,l),f=c,h=a,c+=parseInt(u)})}function circle(t){let e=t.getContext("2d"),l=t.height,a=t.width;e.clearRect(0,0,a,l);let i=JSON.parse(t.dataset.json),n=null!=t.dataset.title?t.dataset.title:"";var o=0;i.forEach(function(t){o+=parseInt(t.value)});let r=0,s=0,c=1;i.forEach(function(t){let i=100*t.value/o;s+=2*i/100*Math.PI,e.beginPath(),e.moveTo(a/2.5,l/2.5),e.fillStyle=t.color,e.arc(a/2.5,l/2.5,a/2.5,r,s,!1),e.fill(),e.save(),r=s,e.beginPath(),e.fillRect(a-65,12*c-9,10,10),e.fillStyle="black",e.font="10px Arial",e.fillText(t.name,a-50,0+12*c),e.restore(),c++}),e.beginPath(),e.fillStyle="black",e.font="10px Arial",e.fillText(n,0,l-20)}function graphicBar(t){let e=t.getContext("2d"),l=t.width,a=t.height;e.clearRect(0,0,l,a);let i=null!=t.dataset.title?t.dataset.title:"";e.fillStyle="black",e.font="10px Arial",e.fillText(i,10,10),e.beginPath(),e.moveTo(0,0),e.lineTo(0,a-15),e.lineTo(l,a-15),e.stroke();let n=JSON.parse(t.dataset.json),o=[],r=0;n.forEach(function(t){o.push(t.value),r++});let s=l/r-t.dataset.max,c=null!=t.dataset.sep?parseInt(t.dataset.sep):s,f=Math.max(...o),h=(l-c*(n.length+1))/n.length,u=null!=t.dataset.min?t.dataset.min:20,p=null!=t.dataset.max?t.dataset.max:30;u>h?h=parseInt(u):p<h&&(h=parseInt(p));let d=c,g=null!=t.dataset.color?t.dataset.color:"blue",x=null!=t.dataset.valcol?t.dataset.valcol:"white";n.forEach(function(t){let l=t.value*(a-15)/f;e.fillStyle=g,e.fillRect(d,a-15-l,h,l),e.fillStyle="black",e.font="10px Arial",e.fillText(t.name.substring(0,6),d,a-5),e.save(),e.fillStyle=x,e.font="10px Arial",e.textAlign="center",e.fillText(t.value,d+h/2,a-l),e.restore(),d=d+h+c})}!function(){var t=document.getElementsByTagName("canvas");for(let e of t)switch(e.className){case"graphic_bar_lpz":graphicBar(e);break;case"circle_lpz":circle(e);break;case"graphic_lpz":graphic(e)}}();